{"version":3,"sources":["pages/dashboard/BookingAutomation/BAAccount.jsx","services/dashboard.jsx"],"names":["BAAccount","props","state","is_ba_memeber","prop_id","ota_password","api_key","prop_key","is_bin_enable","disabled_bin","handleChecked","bind","handleSubmit","handleChange","dashboardService","getBACredential","then","res","success","param","data","setState","alertService","showError","event","updateBAKeys","showSuccess","this","fieldName","target","name","fieldValue","value","preventDefault","req","submitBAKeys","className","onSubmit","type","placeholder","onChange","defaultValue","style","display","checked","disabled","verticalAlign","marginTop","cursor","React","Component","ajaxGet","API_HOST","id","ba_roomid","ajaxPost","ajaxPostForm"],"mappings":"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","file":"static/js/38.7e880fad.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { dashboardService } from 'services/dashboard';\r\nimport { alertService } from 'services/alert';\r\n\r\nimport 'assets/styles/pages/dashboard/bookingAutomation.scss';\r\n\r\nclass BAAccount extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      is_ba_memeber: false,\r\n      prop_id: null,\r\n      ota_password: null,\r\n      api_key: null,\r\n      prop_key: null,\r\n      is_bin_enable: 0,\r\n      disabled_bin: true\r\n    };\r\n    this.handleChecked = this.handleChecked.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    dashboardService.getBACredential().then(res => {\r\n      if (res) {\r\n        if (res.success === true) {\r\n          let param = res.data;\r\n          let disabled_bin = true;\r\n          let is_bin_enable = param.is_bin_enable;\r\n          if (\r\n            param.prop_id === null || param.prop_id === '' ||\r\n            param.ota_password === null || param.ota_password === '' ||\r\n            param.api_key === null || param.api_key === '' ||\r\n            param.prop_key === null || param.prop_key === '' \r\n          ) {\r\n            disabled_bin = true;\r\n            is_bin_enable = 0;\r\n          } else {\r\n            disabled_bin = 0;\r\n          }\r\n          this.setState({\r\n            is_ba_memeber: true,\r\n            prop_id : param.prop_id,\r\n            ota_password : param.ota_password,\r\n            api_key : param.api_key,\r\n            prop_key : param.prop_key,\r\n            is_bin_enable : is_bin_enable,\r\n            disabled_bin: disabled_bin\r\n          });\r\n        }\r\n      } else {\r\n        alertService.showError('Get BA credential');\r\n      }\r\n    });\r\n  }\r\n  \r\n  onClickUpdate(event) {\r\n    dashboardService.updateBAKeys().then(res => {\r\n      if (res && res.success) {\r\n        alertService.showSuccess('Update BA keys');\r\n      } else {\r\n        alertService.showError('Update BA keys');\r\n      }\r\n    });\r\n  }\r\n\r\n  handleChecked(event) {\r\n    this.setState({\r\n      is_bin_enable : (this.state.is_bin_enable === 1 ? 0 : 1),\r\n    });\r\n  }\r\n\r\n  handleChange(event) {\r\n    const fieldName = event.target.name;\r\n    const fieldValue = event.target.value;\r\n    const state = this.state;\r\n    state[fieldName] = fieldValue;\r\n    if (\r\n      state.prop_id === null || state.prop_id === '' ||\r\n      state.ota_password === null || state.ota_password === '' ||\r\n      state.api_key === null || state.api_key === '' ||\r\n      state.prop_key === null || state.prop_key === '' \r\n    ) {\r\n      state.disabled_bin = true;\r\n      state.is_bin_enable = 0;\r\n    } else {\r\n      state.disabled_bin = 0;\r\n    }\r\n\r\n    this.setState({\r\n      [fieldName] : fieldValue,\r\n      disabled_bin: state.disabled_bin,\r\n      is_bin_enable: state.is_bin_enable\r\n    });\r\n  }\r\n\r\n  handleSubmit(event){\r\n    event.preventDefault();\r\n    const req = {\r\n      prop_id: this.state.prop_id,\r\n      ota_password: this.state.ota_password,\r\n      api_key : this.state.api_key,\r\n      prop_key: this.state.prop_key,\r\n      is_bin_enable: this.state.is_bin_enable\r\n    };\r\n    dashboardService.submitBAKeys(req).then(res => {\r\n      if (res && res.success) {\r\n        alertService.showSuccess('Register BA Account');\r\n      } else {\r\n        alertService.showError('Register BA Account');\r\n      }\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"ba-panel col-md-12 col-sm-12 col-lg-11\">\r\n        <div className=\"panel\">\r\n          <div className=\"panel panel-header\">\r\n            <h1>Booking Automation Credential Info</h1>\r\n          </div>\r\n          <div className=\"panel panel-body\">\r\n            <div>\r\n              <form onSubmit={ this.handleSubmit }>\r\n                <div className=\"form-group\">\r\n                  <label className=\"col-sm-4\">Prop ID</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"prop_id\"\r\n                    name=\"prop_id\"\r\n                    onChange={this.handleChange}\r\n                    defaultValue={this.state.prop_id || \"\"}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"col-sm-4\">OTA Password</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"OTA password\"\r\n                    name=\"ota_password\"\r\n                    onChange={this.handleChange}\r\n                    defaultValue={this.state.ota_password || \"\"}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"col-sm-4\">APIKey</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"api_key\"\r\n                    name=\"api_key\"\r\n                    onChange={this.handleChange}\r\n                    defaultValue={this.state.api_key || \"\"}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"col-sm-4\">PropKey</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"propkey\"\r\n                    name=\"prop_key\"\r\n                    onChange={this.handleChange}\r\n                    defaultValue={this.state.prop_key || \"\"}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\" style={{display:'inline-flex'}}>\r\n                  <input type=\"checkbox\"\r\n                          name=\"is_bin_enable\"\r\n                          checked={ (this.state.is_bin_enable === 1 ? true : false) }\r\n                          disabled={this.state.disabled_bin ? \"disabled\" : \"\"}\r\n                          onChange={this.handleChecked} style={{ verticalAlign: \"initial\", marginTop:'10px', cursor:'pointer'}}/>\r\n                  {\r\n                    (this.state.disabled_bin === true) ?\r\n                      <label style={{'color': '#ccc'}}>Enable Book it now?</label>\r\n                    :\r\n                      <label style={{'color': 'black'}}>Enable Book it now?</label>\r\n                  }\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <button className=\"btn btn-success\" type=\"submit\">\r\n                    Save\r\n                  </button>\r\n                  <button className=\"btn btn-danger\" type=\"reset\">\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BAAccount;","import {API_HOST, ajaxGet, ajaxPost, ajaxPostForm} from 'services/config';\r\n\r\nclass DashboardService {\r\n  /////////////////////////////////////////////////\r\n  // Dashboard Content\r\n  /////////////////////////////////////////////////\r\n  getContent() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/index`);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Listings\r\n  /////////////////////////////////////////////////\r\n  getRoomList() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getlistings`);\r\n  }\r\n\r\n  getRoomData(id, ba_roomid) {\r\n    return ajaxGet(`${API_HOST}/ba/api/set_baroomid?roomid=${id}&&ba_roomid=${ba_roomid}`);\r\n  }\r\n\r\n  // TODO: Add Data\r\n  changeRoomState(data) {\r\n    return ajaxPost(`${API_HOST}/ajax/change_status_of_room`, data);\r\n  }\r\n\r\n  getRoomReservation(data = null) {\r\n    if (data) {\r\n      return ajaxGet(`${API_HOST}/ajax/dashboard/my_reservations` + data);\r\n    } else {\r\n      return ajaxGet(`${API_HOST}/ajax/dashboard/my_reservations`);\r\n    }\r\n  }\r\n\r\n  acceptReservation(id, data) {\r\n    return ajaxPost(`${API_HOST}/ajax/reservation/accept/${id}`, data);\r\n  }\r\n\r\n  declineReservation(id, data) {\r\n    return ajaxPost(`${API_HOST}/ajax/reservation/decline/${id}`, data);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Trips\r\n  /////////////////////////////////////////////////\r\n  getOldTripList() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getOldTripsList`);\r\n  }\r\n\r\n  geCurrTripList() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getcurrentTripsList`);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Profile\r\n  /////////////////////////////////////////////////\r\n  removeUserPhoneNubmer(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/removeUserPhoneNumber`, req);\r\n  }\r\n  saveUserProfile(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/saveuserprofile`, req);\r\n  }\r\n  uploadProfilePhoto(req) {\r\n    return ajaxPostForm(`${API_HOST}/ajax/profilepictureupload`, req);\r\n  }\r\n  getVerification() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getverifycation`);\r\n  }\r\n  updateVerifyCode(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/sendVerifyCode`, req);\r\n  }\r\n  verifyPhoneNumber(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/verifyPhoneNumber`, req);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Booking Automation\r\n  /////////////////////////////////////////////////\r\n  getBACredential() {\r\n    return ajaxGet(`${API_HOST}/ba/account/get_ba_credential`);\r\n  }\r\n\r\n  submitBAKeys(req) {\r\n    return ajaxPost(`${API_HOST}/ba/account/register`, req);\r\n  }\r\n\r\n  updateBAKeys() {\r\n    return ajaxGet(`${API_HOST}/ba/api/update`);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // API Keys\r\n  /////////////////////////////////////////////////\r\n  getApiKey() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getapikeys`);\r\n  }\r\n\r\n  generateApiKey() {\r\n    return ajaxPost(`${API_HOST}/ajax/dashboard/generateapikeys`);\r\n  }\r\n}\r\n\r\nexport const dashboardService = new DashboardService();"],"sourceRoot":""}