{"version":3,"sources":["pages/dashboard/RoomListing.jsx","services/dashboard.jsx"],"names":["RoomItem","list_data","index","handleChangeStatus","handlePublish","key","className","to","address_url","id","target","src","featured_image","alt","name","has_subscription","placeholder","data-room-id","value","status","onChange","event","defaultValue","RoomListing","props","state","page_data","bind","dashboardService","getRoomList","then","res","setState","alertService","showError","list_id","preventDefault","list_index","this","rooms_list","filter","list","indexOf","published","temp_room","req","room_id","changeRoomState","showSuccess","message","listed_result_section","map","unlisted_result_section","React","Component","ajaxGet","API_HOST","ba_roomid","data","ajaxPost","ajaxPostForm"],"mappings":"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","file":"static/js/43.7af19407.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { dashboardService } from 'services/dashboard';\r\nimport { alertService } from 'services/alert';\r\n\r\nimport 'assets/styles/pages/dashboard/rooms.scss';\r\nimport 'assets/styles/pages/dashboard/dashboard.scss';\r\n\r\nconst RoomItem = ((list_data, index, handleChangeStatus, handlePublish) => {\r\n  return (\r\n    <li key={index}>\r\n      <div className=\"row\">\r\n        <div className=\"col-lg-2 col-md-3\">\r\n          <Link to={`/homes/${list_data.address_url}/${list_data.id}`} target=\"_blank\">\r\n            <div className=\"media-cover text-center\">\r\n              <img src={list_data.featured_image} className=\"img-responsive\" alt=\"\" />\r\n            </div>\r\n          </Link>\r\n        </div>\r\n        <div className=\"col-lg-7 col-md-5\">\r\n          <span className=\"list-ink\">\r\n            <Link to={`/homes/${list_data.address_url}/${list_data.id}`} target=\"_blank\">\r\n              {list_data.name}\r\n            </Link>\r\n          </span>\r\n          <div className=\"actions\">\r\n            <Link className=\"listing-link-space\" to={`/rooms/manage/${list_data.id}/basics`} target=\"_blank\">\r\n              Manage Listing and Calendar\r\n            </Link>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-lg-3 col-md-4 text-right\">\r\n          <div className=\"listing-criteria-header\">\r\n            <div className=\"hide-sm show-md show-lg\">\r\n              <div className=\"field-wrapper\">\r\n                {list_data.has_subscription === true &&\r\n                  <select\r\n                    name=\"State\"\r\n                    placeholder=\"State\"\r\n                    className=\"form-in\"\r\n                    data-room-id={list_data.id}\r\n                    value={list_data.status}\r\n                    onChange={(event) => handleChangeStatus(list_data.id, event)}\r\n                  >\r\n                    <option value=\"Listed\" defaultValue=\"selected\">Listed</option>\r\n                    <option value=\"Unlisted\">Unlisted</option>\r\n                    <option value=\"Draft\">Draft</option>\r\n                  </select>}\r\n              </div>\r\n            </div>\r\n            {/* { list_data.has_subscription === false  ? <a className=\"list-noti btn btn-primary text-white\" href={`/rooms/${list_data.id}/subscribe_property`} rel=\"noopener noreferrer\" target='_blank'>Subscribe</a> : <span className=\"list-noti\">Subscribed</span>  }\r\n            { list_data.published !== 'unpublished' ? '' : <Link to=\"#\" data-id={list_data.id} className=\"list-noti ml-1\" onClick={(event)=>handlePublish(list_data.id, event)}> | Save Status</Link>} */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n})\r\n\r\nclass RoomListing extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      page_data: null\r\n    };\r\n\r\n    this.handleChangeStatus = this.handleChangeStatus.bind(this);\r\n    this.handlePublish = this.handlePublish.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    dashboardService.getRoomList().then(res => {\r\n      if (res) {\r\n        this.setState({\r\n          page_data: res.page_data\r\n        })\r\n      } else {\r\n        alertService.showError('Get Room List');\r\n      }\r\n    });\r\n  }\r\n\r\n  handleChangeStatus(list_id, event) {\r\n    event.preventDefault();\r\n    let value = event.target.value;\r\n    let list_index = this.state.page_data.rooms_list.filter((list) => list.id === list_id);\r\n    list_index = this.state.page_data.rooms_list.indexOf(list_index[0]);\r\n    let { page_data } = this.state;\r\n    page_data.rooms_list[list_index].status = value;\r\n    page_data.rooms_list[list_index].published = 'unpublished';\r\n    this.setState({\r\n      page_data: page_data\r\n    });\r\n  }\r\n\r\n  handlePublish(list_id, event) {\r\n    event.preventDefault();\r\n    let list_index = this.state.page_data.rooms_list.filter((list) => list.id === list_id);\r\n    let temp_room = list_index[0];\r\n    list_index = this.state.page_data.rooms_list.indexOf(list_index[0]);\r\n    let { page_data } = this.state;\r\n    \r\n    // page_data.rooms_list[list_index].status = value\r\n    let req = {\r\n      room_id: list_id,\r\n      status: temp_room.status\r\n    }\r\n    dashboardService.changeRoomState(req).then(res => {\r\n      if (res && res.status === 'success') {\r\n        alertService.showSuccess(res.message, '');\r\n        page_data.rooms_list[list_index].published = 'published';\r\n        this.setState({\r\n          page_data: page_data\r\n        });\r\n      } else {\r\n        alertService.showError('Update room status', 'Error!!!');\r\n      };\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // Get Listed Items\r\n    let listed_result_section = this.state.page_data && this.state.page_data.rooms_list.map((list_data, index) => {\r\n      if (list_data.status !== \"Listed\") return null;\r\n      return (\r\n        RoomItem(list_data, index, this.handleChangeStatus, this.handlePublish)\r\n      )\r\n    })\r\n\r\n    // Get Unlisted Items\r\n    let unlisted_result_section = this.state.page_data && this.state.page_data.rooms_list.map((list_data, index) => {\r\n      if (list_data.status === \"Listed\") return null;\r\n      return (\r\n        RoomItem(list_data, index, this.handleChangeStatus, this.handlePublish)\r\n      )\r\n    })\r\n\r\n    // Rendering\r\n    return (\r\n      <div>\r\n        {/* Listed */}\r\n        <div className=\"aside-main-content\">\r\n          <div className=\"head-label\">\r\n            <h4>Listed</h4>\r\n          </div>\r\n\r\n          <div className=\"aside-main-cn\">\r\n            <div className=\"your-listing\">\r\n              <ul className=\"list-unstyled listing-all\">\r\n                {\r\n                  listed_result_section\r\n                }\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Listed */}\r\n\r\n        {/* UnListed */}\r\n        <div className=\"aside-main-content\">\r\n          <div className=\"head-label\">\r\n            <h4>Unlisted</h4>\r\n          </div>\r\n          <div className=\"aside-main-cn\">\r\n            <div className=\"your-listing\">\r\n              <ul className=\"list-unstyled listing-all\">\r\n                {\r\n                  unlisted_result_section\r\n                }\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* UnListed */}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default RoomListing;","import {API_HOST, ajaxGet, ajaxPost, ajaxPostForm} from 'services/config';\r\n\r\nclass DashboardService {\r\n  /////////////////////////////////////////////////\r\n  // Dashboard Content\r\n  /////////////////////////////////////////////////\r\n  getContent() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/index`);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Listings\r\n  /////////////////////////////////////////////////\r\n  getRoomList() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getlistings`);\r\n  }\r\n\r\n  getRoomData(id, ba_roomid) {\r\n    return ajaxGet(`${API_HOST}/ba/api/set_baroomid?roomid=${id}&&ba_roomid=${ba_roomid}`);\r\n  }\r\n\r\n  // TODO: Add Data\r\n  changeRoomState(data) {\r\n    return ajaxPost(`${API_HOST}/ajax/change_status_of_room`, data);\r\n  }\r\n\r\n  getRoomReservation(data = null) {\r\n    if (data) {\r\n      return ajaxGet(`${API_HOST}/ajax/dashboard/my_reservations` + data);\r\n    } else {\r\n      return ajaxGet(`${API_HOST}/ajax/dashboard/my_reservations`);\r\n    }\r\n  }\r\n\r\n  acceptReservation(id, data) {\r\n    return ajaxPost(`${API_HOST}/ajax/reservation/accept/${id}`, data);\r\n  }\r\n\r\n  declineReservation(id, data) {\r\n    return ajaxPost(`${API_HOST}/ajax/reservation/decline/${id}`, data);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Trips\r\n  /////////////////////////////////////////////////\r\n  getOldTripList() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getOldTripsList`);\r\n  }\r\n\r\n  geCurrTripList() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getcurrentTripsList`);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Profile\r\n  /////////////////////////////////////////////////\r\n  removeUserPhoneNubmer(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/removeUserPhoneNumber`, req);\r\n  }\r\n  saveUserProfile(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/saveuserprofile`, req);\r\n  }\r\n  uploadProfilePhoto(req) {\r\n    return ajaxPostForm(`${API_HOST}/ajax/profilepictureupload`, req);\r\n  }\r\n  getVerification() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getverifycation`);\r\n  }\r\n  updateVerifyCode(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/sendVerifyCode`, req);\r\n  }\r\n  verifyPhoneNumber(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/verifyPhoneNumber`, req);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Booking Automation\r\n  /////////////////////////////////////////////////\r\n  getBACredential() {\r\n    return ajaxGet(`${API_HOST}/ba/account/get_ba_credential`);\r\n  }\r\n\r\n  submitBAKeys(req) {\r\n    return ajaxPost(`${API_HOST}/ba/account/register`, req);\r\n  }\r\n\r\n  updateBAKeys() {\r\n    return ajaxGet(`${API_HOST}/ba/api/update`);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // API Keys\r\n  /////////////////////////////////////////////////\r\n  getApiKey() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getapikeys`);\r\n  }\r\n\r\n  generateApiKey() {\r\n    return ajaxPost(`${API_HOST}/ajax/dashboard/generateapikeys`);\r\n  }\r\n}\r\n\r\nexport const dashboardService = new DashboardService();"],"sourceRoot":""}