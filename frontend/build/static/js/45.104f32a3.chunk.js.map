{"version":3,"sources":["pages/dashboard/Profile/Verification.jsx","services/dashboard.jsx"],"names":["Verification","props","state","user_info","verification","phone_numbers","handleChangeVerifyCode","bind","handleProcessVerify","SendEmailVerifyLink","dashboardService","getVerification","then","res","setState","verifycation","alertService","showError","e","index","preventDefault","req","phone_number_id","this","id","updateVerifyCode","showSuccess","value","target","verification_code","code","verifyPhoneNumber","status","message","className","email","role","to","onClick","style","cursor","length","type","data-dismiss","aria-label","aria-hidden","map","phone_number","key","phone_number_protected","replace","onChange","event","name","placeholder","handleSendVerifyCode","React","Component","ajaxGet","API_HOST","ba_roomid","data","ajaxPost","ajaxPostForm"],"mappings":"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","file":"static/js/45.104f32a3.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { dashboardService } from 'services/dashboard';\r\nimport { alertService } from 'services/alert';\r\nimport 'assets/styles/pages/dashboard/verification.scss';\r\n\r\nclass Verification extends React.Component{\r\n  constructor(props){\r\n  super(props)\r\n  this.state = {\r\n    user_info : {},\r\n    verification : {},\r\n    phone_numbers : []\r\n  }\r\n  this.handleChangeVerifyCode = this.handleChangeVerifyCode.bind(this)\r\n  this.handleProcessVerify = this.handleProcessVerify.bind(this)\r\n  this.SendEmailVerifyLink = this.SendEmailVerifyLink.bind(this)\r\n  }\r\n  componentDidMount() {\r\n\t\tdashboardService.getVerification().then(res => {\r\n\t\t\tif (res) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tuser_info : res.user_info,\r\n\t\t\t\t\tverification : res.verifycation,\r\n\t\t\t\t\tphone_numbers : res.phone_numbers\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\talertService.showError('Get verification');\r\n\t\t\t}\r\n\t\t})\r\n  }\r\n  handleSendVerifyCode(e, index) {\r\n    e.preventDefault();\r\n\t\tconst req = {\r\n\t\t\tphone_number_id : this.state.phone_numbers[index].id\r\n\t\t}\r\n\t\tdashboardService.updateVerifyCode(req).then(res => {\r\n\t\t\tif (res) {\r\n\t\t\t\talertService.showSuccess('Update verify code');\r\n\t\t\t} else {\r\n\t\t\t\talertService.showError('Update verify code');\r\n\t\t\t}\r\n\t\t})\r\n    // Axios.post('/ajax/sendVerifyCode', { phone_number_id : this.state.phone_numbers[index].id})    \r\n  }\r\n  SendEmailVerifyLink() {\r\n\r\n  }\r\n  handleChangeVerifyCode(e, index){\r\n  let value = e.target.value;\r\n  let phone_numbers = this.state.phone_numbers;\r\n  phone_numbers[index].verification_code = value;\r\n  this.setState({\r\n    phone_numbers : phone_numbers\r\n  })\r\n  }\r\n  handleProcessVerify(e, index){\r\n  e.preventDefault();\r\n\tconst req = {\r\n\t\tphone_number_id : this.state.phone_numbers[index].id, \r\n\t\tcode : this.state.phone_numbers[index].verification_code\r\n\t}\r\n\tdashboardService.verifyPhoneNumber(req).then(res => {\r\n\t\tif(res && res.status === 'success') {\r\n\t\t\talertService.showSuccess(res.message);\r\n\t\t\tthis.setState({\r\n\t\t\t\tphone_numbers : res.phone_numbers\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\talertService.showError(res.message, '');\r\n\t\t}\r\n\t})\r\n  // Axios.post('/ajax/verifyPhoneNumber', { phone_number_id : this.state.phone_numbers[index].id, code : this.state.phone_numbers[index].verification_code})\r\n  // .then(response =>{\r\n  //   if(response.data.status == 'success'){\r\n  //   toast.success(response.data.message)\r\n  //   }\r\n  //   else{\r\n  //   toast.error(response.data.message)\r\n  //   }\r\n  //   this.setState({\r\n  //   phone_numbers : response.data.phone_numbers\r\n  //   })\r\n  // })\r\n  }\r\n  render() {\r\n    return (\r\n\t\t\t<div className=\"col-md-12 p-0 m-0\">\r\n\t\t\t\t<div id=\"dashboard-content\">\r\n\t\t\t\t\t<div className=\"panel verified-container\">\r\n\t\t\t\t\t\t<div className=\"panel-header\">\r\n\t\t\t\t\t\t\tYour Current Verifications\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"panel-body\">\r\n\t\t\t\t\t\t\t<ul className=\"list-layout edit-verifications-list\">\r\n\t\t\t\t\t\t\t\t<li className=\"edit-verifications-list-item clearfix email verified\">\r\n\t\t\t\t\t\t\t\t\t<h4>Email Address</h4>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tthis.state.verification.email === 'yes' ?  <p className=\"description\">You have confirmed your email: <b>{this.state.user_info.email}</b>.  A confirmed email is important to allow us to securely communicate with you.\r\n\t\t\t\t\t\t\t\t\t\t</p> : \r\n\t\t\t\t\t\t\t\t\t\t<div className='form-group -auto mt-1' >\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"alert alert-dismissible  show\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Note!</strong>Your Email does not verified! Please click \r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"#\" onClick={this.SendEmailVerifyLink} className='font-weight-bold' style={{ cursor : 'pointer' }}><code>Here</code></Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\tto send verify link.\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"edit-verifications-list-item clearfix email verified\">\r\n\t\t\t\t\t\t\t\t\t<h4>Phone Number</h4>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tthis.state.phone_numbers.length === 0 ?\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"alert alert-dismissible  show\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t\t\t\t<strong>Note!</strong> Please save your phone numbers in profile page. It is important for community of vacation.rentals.\r\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">Ã—</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.state.phone_numbers.map((phone_number, index) =>{\r\n\t\t\t\t\t\t\t\t\t\treturn  <div className=' ' key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<p></p>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tphone_number.status !== 'Confirmed' ? \r\n\t\t\t\t\t\t\t\t\t\t\t<form  className=\"form-inline\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label className=\"mr-sm-2 mb-0\">Phone Number</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label className=\"mr-sm-2 mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<strong>{phone_number.phone_number_protected.replace(/ /g,'')}</strong> : \r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t{/* <label className=\"mr-sm-2 mb-0\" htmlFor=\"last_name\">Last Name</label> */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control mr-sm-2 mb-2 mb-sm-0\" onChange={(event) => this.handleChangeVerifyCode(event, index)} id=\"last_name\" name=\"last_name\" placeholder='Verify Code' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='form-group  ml-auto mt-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary mt-2 mt-sm-0\" onClick={(event)=>this.handleSendVerifyCode(event, index)}>Send Code</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary mt-2 mt-sm-0\" onClick={(event)=>this.handleProcessVerify(event, index)}>Verify</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t\t\t: \r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"description\">You have confirmed your phone number: <b>{phone_number.phone_number_protected.replace(/ /g,'')}</b>.\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Verification;","import {API_HOST, ajaxGet, ajaxPost, ajaxPostForm} from 'services/config';\r\n\r\nclass DashboardService {\r\n  /////////////////////////////////////////////////\r\n  // Dashboard Content\r\n  /////////////////////////////////////////////////\r\n  getContent() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/index`);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Listings\r\n  /////////////////////////////////////////////////\r\n  getRoomList() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getlistings`);\r\n  }\r\n\r\n  getRoomData(id, ba_roomid) {\r\n    return ajaxGet(`${API_HOST}/ba/api/set_baroomid?roomid=${id}&&ba_roomid=${ba_roomid}`);\r\n  }\r\n\r\n  // TODO: Add Data\r\n  changeRoomState(data) {\r\n    return ajaxPost(`${API_HOST}/ajax/change_status_of_room`, data);\r\n  }\r\n\r\n  getRoomReservation(data = null) {\r\n    if (data) {\r\n      return ajaxGet(`${API_HOST}/ajax/dashboard/my_reservations` + data);\r\n    } else {\r\n      return ajaxGet(`${API_HOST}/ajax/dashboard/my_reservations`);\r\n    }\r\n  }\r\n\r\n  acceptReservation(id, data) {\r\n    return ajaxPost(`${API_HOST}/ajax/reservation/accept/${id}`, data);\r\n  }\r\n\r\n  declineReservation(id, data) {\r\n    return ajaxPost(`${API_HOST}/ajax/reservation/decline/${id}`, data);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Trips\r\n  /////////////////////////////////////////////////\r\n  getOldTripList() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getOldTripsList`);\r\n  }\r\n\r\n  geCurrTripList() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getcurrentTripsList`);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Profile\r\n  /////////////////////////////////////////////////\r\n  removeUserPhoneNubmer(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/removeUserPhoneNumber`, req);\r\n  }\r\n  saveUserProfile(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/saveuserprofile`, req);\r\n  }\r\n  uploadProfilePhoto(req) {\r\n    return ajaxPostForm(`${API_HOST}/ajax/profilepictureupload`, req);\r\n  }\r\n  getVerification() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getverifycation`);\r\n  }\r\n  updateVerifyCode(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/sendVerifyCode`, req);\r\n  }\r\n  verifyPhoneNumber(req) {\r\n    return ajaxPost(`${API_HOST}/ajax/verifyPhoneNumber`, req);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // Booking Automation\r\n  /////////////////////////////////////////////////\r\n  getBACredential() {\r\n    return ajaxGet(`${API_HOST}/ba/account/get_ba_credential`);\r\n  }\r\n\r\n  submitBAKeys(req) {\r\n    return ajaxPost(`${API_HOST}/ba/account/register`, req);\r\n  }\r\n\r\n  updateBAKeys() {\r\n    return ajaxGet(`${API_HOST}/ba/api/update`);\r\n  }\r\n\r\n  /////////////////////////////////////////////////\r\n  // API Keys\r\n  /////////////////////////////////////////////////\r\n  getApiKey() {\r\n    return ajaxGet(`${API_HOST}/ajax/dashboard/getapikeys`);\r\n  }\r\n\r\n  generateApiKey() {\r\n    return ajaxPost(`${API_HOST}/ajax/dashboard/generateapikeys`);\r\n  }\r\n}\r\n\r\nexport const dashboardService = new DashboardService();"],"sourceRoot":""}